<%= form_with(model: block, url: block.persisted? ? content_block_path(block) : content_blocks_path, local: true, multipart: true, id: dom_id(block, 'form'), class: 'form', data: { controller: "better_together--form-validation" }) do |form| %>
  <% if block.errors.any? %>
    <div class="alert alert-danger">
      <h4>Please correct the following errors:</h4>
      <ul>
        <% block.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- Add other block-specific fields here -->
  <div class="mb-3">
    <%= render partial: 'better_together/content/blocks/fields/block',
             locals: { block: } %>
  </div>

  <div class="mb-3 text-end">
    <%= form.submit 'Save Changes', class: 'btn btn-primary' %>
  </div>
<% end %>
