<%# locals: (requests:, request_offer_map:) %>
<% if requests.present? %>
  <div class="container my-4">
    <h2 class="h5 mb-3"><%= t('better_together.joatu.matches.title', default: 'Potential Matches') %></h2>
    <ul class="list-group">
      <% requests.each do |request| %>
        <% offer = request_offer_map[request.id] %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <%= link_to request.name, joatu_request_path(request), class: 'text-decoration-none' %>
            <div class="text-muted small"><%= truncate(request.description.to_s, length: 120) %></div>
            <% if offer %>
              <div class="text-muted small mt-1">
                <%= t('better_together.joatu.matches.matches_offer', default: 'Matches offer:') %>
                <%= link_to offer.name, joatu_offer_path(offer), class: 'text-decoration-none' %>
              </div>
            <% end %>
          </div>
          <div>
            <% if offer %>
              <%= button_to t('better_together.joatu.matches.create_agreement', default: 'Create Agreement'),
                            joatu_agreements_path(request_id: request.id, offer_id: offer.id),
                            method: :post,
                            class: 'btn btn-sm btn-primary' %>
            <% end %>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
<% end %>

