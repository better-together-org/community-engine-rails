<% content_for :page_title do %>
  <%= @page.title %>
  <% if permitted_to?('manage_platform') %>
    | Pages
  <% end %>
<% end %>

<% content_for :editor_status do %>
  <% if permitted_to?('manage_platform') %>
    <% if policy(@page).index? %>
      <li class="nav-item record-list" data-bs-toggle="tooltip" data-bs-placement="bottom" title="<%= t('globals.back_to_list') %>">
        <%= link_to pages_path, class: 'nav-link' do %>
          <i class="fas fa-list"></i>
        <% end %>
      </li>
    <% end %>
    <% if policy(@page).update? %>
      <li class="nav-item edit" data-bs-toggle="tooltip" data-bs-placement="bottom" title="<%= t('globals.edit') %>">
        <%= link_to edit_page_path(@page, locale: I18n.locale), class: 'nav-link' do %>
          <i class="fas fa-pencil"></i>
        <% end %>
      </li>
    <% end %>
  <% end %>
<% end %>

<% content_for :page_content do %>
  <%= render @page.blocks if @page.blocks.any? %>

  <%= share_buttons(shareable: @page) if @page.privacy_public? %>
<% end %>

<%= render layout: @layout do %>
  <% if @page.template.present? && @page.page_blocks.empty? %>
    <%= render template: @page.template %>
  <% else %>
    <%= yield :page_content %>
  <% end %>
<% end %>
