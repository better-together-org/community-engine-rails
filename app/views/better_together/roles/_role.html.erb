<tr id="<%= dom_id(role) %>">
  <td><%= role.identifier %></td>
  <td><%= role.name %></td>
  <td><%= role.description.presence || t('globals.no_description') %></td>
  <td>
    <% summary = role_permission_summary(role, limit: 3) %>
    <% if summary[:labels].any? %>
      <div class="d-flex flex-wrap gap-1">
        <% summary[:labels].each do |label| %>
          <span class="badge bg-light text-dark"><%= label %></span>
        <% end %>
        <% if summary[:remaining].positive? %>
          <span class="badge bg-secondary">
            <%= t('better_together.roles.permissions.more', count: summary[:remaining]) %>
          </span>
        <% end %>
      </div>
    <% else %>
      <span class="text-muted"><%= t('better_together.roles.permissions.none') %></span>
    <% end %>
  </td>
  <td><%= role.position %></td>
  <td><%= role.protected ? t('globals.yes') : t('globals.no') %></td>
  <td class="text-end">
    <%= link_to role_path(role), class: 'btn btn-outline-info btn-sm me-1', 'aria-label' => t('globals.show') do %>
      <i class="fas fa-eye"></i> <%= t('globals.show') %>
    <% end %>

    <% if policy(role).edit? %>
      <%= link_to edit_role_path(role), class: 'btn btn-outline-secondary btn-sm me-1', 'aria-label' => t('globals.edit') do %>
        <i class="fas fa-edit"></i> <%= t('globals.edit') %>
      <% end %>
    <% end %>

    <% if policy(role).destroy? %>
      <%= link_to role_path(role),
                  method: :delete,
                  data: { turbo_method: :delete, turbo_confirm: t('roles.confirm_destroy') },
                  class: 'btn btn-outline-danger btn-sm',
                  'aria-label' => t('globals.destroy') do %>
        <i class="fas fa-trash-alt"></i> <%= t('globals.destroy') %>
      <% end %>
    <% end %>
  </td>
</tr>
