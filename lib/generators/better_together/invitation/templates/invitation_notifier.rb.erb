# frozen_string_literal: true

module BetterTogether
  # Notifier for <%= invitation_name %> invitations
  class <%= invitation_name.classify %>InvitationNotifier < InvitationNotifierBase
    def invite
      @invitation = params[:invitation]
      @<%= invitation_name %> = @invitation.<%= invitation_name %>

      notification_params = {
        type: '<%= invitation_name %>_invitation',
        message: t(
          'better_together.<%= invitation_name %>_invitation_notifier.invite.message',
          <%= invitation_name %>_name: @<%= invitation_name %>.name,
          default: 'You have been invited to join %{<%= invitation_name %>_name}'
        ),
        url: @invitation.url_for_review
      }

      deliver(BetterTogether::Notification.with(notification_params))
    end
  end
end