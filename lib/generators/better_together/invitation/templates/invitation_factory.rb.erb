# frozen_string_literal: true

FactoryBot.define do
  factory :<%= namespace_path.present? ? "#{namespace_path}_" : "" %><%= invitation_name %>_invitation, class: '<%= invitation_class_name %>' do
    association :invitable, factory: :<%= namespace_path.present? ? "#{namespace_path}_" : "" %><%= invitation_name %>
    association :inviter, factory: :<%= namespace_path.present? ? "#{namespace_path}_" : namespaced? ? '' : 'better_together_' %>person
    invitee_email { Faker::Internet.email }
    message { Faker::Lorem.paragraph }
    status { 'pending' }
    locale { I18n.default_locale }

    trait :with_invitee do
      association :invitee, factory: :<%= namespace_path.present? ? "#{namespace_path}_" : namespaced? ? '' : 'better_together_' %>person
      invitee_email { invitee.user.email }
    end

    trait :accepted do
      status { 'accepted' }
    end

    trait :declined do
      status { 'declined' }
    end

    trait :with_role do
      association :role, factory: :<%= namespace_path.present? ? "#{namespace_path}_" : namespaced? ? '' : 'better_together_' %>role
    end

    trait :recently_sent do
      last_sent { 10.minutes.ago }
    end
  end
end