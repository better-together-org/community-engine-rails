#!/usr/bin/env bash
set -euo pipefail

# Ensure i18n-tasks (in development/test groups) is available
export DISABLE_SPRING=1
export BUNDLE_WITH="${BUNDLE_WITH:-development:test}"
export BUNDLE_WITHOUT="${BUNDLE_WITHOUT:-}"

usage() {
  echo "Usage: bin/i18n [normalize|check|health|all]" >&2
}

cmd="${1:-all}"

case "$cmd" in
  normalize)
    bundle exec i18n-tasks normalize
    ;;
  check)
    bundle exec i18n-tasks check-missing
    bundle exec i18n-tasks check-consistent-interpolations
    ;;
  health)
    bundle exec i18n-tasks health
    ;;
  all)
    bundle exec i18n-tasks normalize
    bundle exec i18n-tasks check-missing
    bundle exec i18n-tasks check-consistent-interpolations
    ;;
  *)
    usage
    exit 1
    ;;
esac

